<?xml version="1.0" encoding="utf-8"?>
<component name="StationPlayDialog" extends="Dialog" >

 <interface> 
    <field id = "station" type = "node" onChange = "stationChanged"/>
</interface>

	<script type="text/brightscript" uri="pkg:/components/StationActions.brs" />

	<script type="text/brightscript">
		<![CDATA[
		    sub init()
                m.top.graphicWidth = 200
                m.top.graphicHeight = 200

                m.top.observefield("buttonSelected", "buttonSelected")
            end sub

            sub stationChanged(event)
                m.top.title = m.top.station.name
                m.top.graphicUri = m.top.station.image                
                if m.top.station.description <> invalid
                    m.top.message = m.top.station.description
                end if

                m.top.buttons = ["Play", "Add to My Stations"]
            end sub

            sub buttonSelected(event)
                index = event.getData()

                if index = 0
                    dialog_playStation()
                else if index = 1
                    dialog_addStation()
                end if
            end sub

            sub dialog_playStation()
                PlayStation(m.top.station)
                m.top.buttons = []
                m.top.message = "Please wait while The Bat Player finds what is playing on " + m.top.station.name
            end sub

            sub dialog_addStation()
                AddStation(m.top.station)
            end sub
        ]]>
    </script>
</component>