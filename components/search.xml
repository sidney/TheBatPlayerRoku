<?xml version="1.0" encoding="utf-8"?>
<component name="SearchResultsPanel" extends="ListPanel" initialFocus="exampleRowList">

 <interface> 
    <field id = "stations" type = "node" onChange = "setsearchresults"/>
</interface>

<script type="text/brightscript" uri="pkg:/source/config.brs" />

<script type = "text/brightscript" >
    <![CDATA[

    sub init()
        list = m.top.findNode("stationlist")
        m.top.list = list
        m.top.list.observefield("itemFocused", "itemFocused")
        m.top.list.observefield("itemSelected", "itemSelected")

        m.top.focusable = true
        m.top.list.setFocus(true)
        m.top.observefield("stations", "showsearchresults")
        
        m.stationimage = m.top.findNode("stationimage")

    end sub

    sub showsearchresults()
        m.top.list.content = m.top.stations
    end sub

    sub itemFocused(event)
        if m.top.stations = invalid
            return
        end if

        index = event.getData()
        item = m.top.stations.getChild(index)
        m.stationimage.uri = item.image
    end sub

    sub itemSelected(event)
        index = event.getData()
        station = m.top.stations.getChild(index)

        ' stationDetails = createObject("roSGNode", "StationDetailPanel")
        m.stationDetails = m.top.getParent().getParent().getParent().panelSet.createChild("StationDetailPanel")
        m.stationDetails.station = station
    end sub
    ]]>

  </script>

<children>
    <LabelList
    id = "stationlist"
    translation = "[160,92]"
    itemSize = "[1000,48]" >
    </LabelList>

    <Poster 
      id = "stationimage"
      translation = "[ 600, 20 ]" 
      width = "400" 
      height = "400" 
      />
</children>

</component>