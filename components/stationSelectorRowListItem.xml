<?xml version = "1.0" encoding = "utf-8" ?>
 
<component name = "StationSelectorRowListItem" extends = "Group" >
 	<script type="text/brightscript" uri="pkg:/source/roku-lib/RokuLib/util/MathUtils.brs" />

  <interface> 
    <field id = "itemContent" type = "node" onChange = "showcontent"/>
    <field id = "focusPercent" type = "float" onChange = "showfocus"/> 
    <field id = "rowFocusPercent" type = "float" onChange = "showrowfocus"/>
  </interface>
 
  <script type = "text/brightscript" >

    <![CDATA[

    sub init()
      m.itemposter = m.top.findNode("itemPoster") 
      m.itemmask = m.top.findNode("itemMask")
      m.itemlabel = m.top.findNode("itemLabel")
    end sub

    sub showcontent()
      itemcontent = m.top.itemContent
      m.itemposter.uri = itemcontent.image
      m.itemlabel.text = itemcontent.name
    end sub

    sub showfocus()
      scale = 1 + (m.top.focusPercent * 0.22)
      m.itemposter.scale = [scale, scale]
  
      m.itemlabel.opacity = RlMax(m.top.focusPercent * 0.8, 0.2)
      m.itemmask.opacity = 0.75 - (m.top.focusPercent * 0.75)

      labelYPosition = RlMax(265 * m.top.focusPercent, 250)
      m.itemlabel.translation = [ 0, labelYPosition ]

      if m.top.focusPercent = 1
        m.itemlabel.scrollSpeed = 100
      else
        m.itemlabel.scrollSpeed = 0
      end if

    end sub

    sub showrowfocus()
      m.itemlabel.opacity = 0.2
    end sub

    ]]>

  </script>

  <children >

    <Poster 
      id = "itemPoster"
      uri="https://batplayerrokuheader.imgix.net/selection_bat_logo-HD.png?fm=jpg&amp;q=90&amp;txtfont=Helvetica+Neue&amp;txtclr=aaffffff&amp;txtalign=center&amp;txtsize=25&amp;txtfit=max&amp;txtpad=45&amp;txt=Configure%20your%20Bat%20Player%20on%20the%20web%20at%20http%3A%2F%2F10.0.1.83%3A9999&amp;w=1280"
      translation = "[ 30, 20 ]" 
      width = "220" 
      height = "220" 
      scaleRotateCenter = "[ 160.0, 160.0 ]" >
  
      <Rectangle 
        id = "itemMask" 
        color = "0x000000FF" 
        opacity = "0.75" 
        width = "220" 
        height = "220" 
        scaleRotateCenter = "[ 256.0, 144.0 ]"/>
    </Poster>

    <ScrollingLabel 
      id = "itemLabel" 
      translation = "[ 0, 250 ]" 
      horizAlign = "center" 
      scrollSpeed = "0"
      scaleRotateCenter = "[ 110.0, 110.0 ]"
      maxWidth = "260" />
      

  </children>

</component>
